/*****
 * A no frills tooltip implementation.
 *****/(function(a){var b=window.nvtooltip={};b.show=function(b,c,d,e){var f=a('<div class="nvtooltip">');d=d||"s",e=e||20,f.html(c).css({left:-1e3,top:-1e3,opacity:0}).appendTo("body");var g=f.height()+parseInt(f.css("padding-top"))+parseInt(f.css("padding-bottom")),h=f.width()+parseInt(f.css("padding-left"))+parseInt(f.css("padding-right")),i=a(window).width(),j=a(window).height(),k=a("body").scrollTop(),l=a("body").scrollLeft(),m,n;switch(d){case"e":m=b[0]-h-e,n=b[1]-g/2,m<l&&(m=b[0]+e),n<k&&(n=k+5),n+g>k+j&&(n=k-g-5);break;case"w":m=b[0]+e,n=b[1]-g/2,m+h>i&&(m=b[0]-h-e),n<k&&(n=k+5),n+g>k+j&&(n=k-g-5);break;case"n":m=b[0]-h/2,n=b[1]+e,m<l&&(m=l+5),m+h>i&&(m=i-h-5),n+g>k+j&&(n=b[1]-g-e);break;case"s":m=b[0]-h/2,n=b[1]-g-e,m<l&&(m=l+5),m+h>i&&(m=i-h-5),k>n&&(n=b[1]+20)}f.css({left:m,top:n,opacity:1});return f},b.cleanup=function(){var b=a(".nvtooltip");b.css({"transition-delay":"0 !important","-moz-transition-delay":"0 !important","-webkit-transition-delay":"0 !important"}),b.css("opacity",0),setTimeout(function(){b.remove()},500)}})(jQuery),function(a,b){var c={version:"0.0.1"};b.nv=c,c.models={},c.graphs=[],c.log={},c.dispatch=a.dispatch("render_start","render_end"),b.log=function(a){typeof b.console=="object"&&typeof b.console.log=="function"&&console.log.apply(console,arguments);return a},c.dispatch.on("render_start",function(a){c.log.startTime=+(new Date)}),c.dispatch.on("render_end",function(a){c.log.endTime=+(new Date),c.log.totalTime=c.log.endTime-c.log.startTime,log("total",c.log.totalTime)}),c.render=function a(b){var d=b||1;a.active=!0,c.dispatch.render_start(),setTimeout(function(){var b;for(var e=0;e<d&&(graph=a.queue[e]);e++)b=graph.generate(),typeof graph.callback=="function"&&graph.callback(b),c.graphs.push(b);a.queue.splice(0,e),a.queue.length>0?setTimeout(arguments.callee,0):(c.render.active=!1,c.dispatch.render_end())},0)},c.render.queue=[],c.addGraph=function(a){typeof arguments[0]=="function"&&(a={generate:arguments[0],callback:arguments[1]}),c.render.queue.push(a),c.render.active||c.render()},c.strip=function(a){return a.replace(/(\s|&)/g,"")},c.models.legend=function(){function g(h){h.each(function(g){var h=a.select(this).selectAll("g.legend").data([g]),i=h.enter().append("g").attr("class","legend").append("g"),j=h.select("g").attr("transform","translate("+b.left+","+b.top+")"),k=j.selectAll(".series").data(function(a){return a}),l=k.enter().append("g").attr("class","series").on("mouseover",function(a,b){f.legendMouseover(a,b)}).on("mouseout",function(a,b){f.legendMouseout(a,b)}).on("click",function(a,b){f.legendClick(a,b)});l.append("circle").style("fill",function(a,b){return a.color||e[b%20]}).style("stroke",function(a,b){return a.color||e[b%20]}).style("stroke-width",2).attr("r",5),l.append("text").text(function(a){return a.key}).attr("text-anchor","start").attr("dy",".32em").attr("dx","8"),k.classed("disabled",function(a){return a.disabled}),k.exit().remove();var m=5,n=5,o=0,p;k.attr("transform",function(d,e){var f=a.select(this).select("text").node().getComputedTextLength()+28;p=n,c<b.left+b.right+p+f&&(n=p=5,m+=20),n+=f,n>o&&(o=n);return"translate("+p+","+m+")"}),j.attr("transform","translate("+(c-b.right-o)+","+b.top+")"),d=b.top+b.bottom+m+15});return g}var b={top:5,right:0,bottom:5,left:10},c=400,d=20,e=a.scale.category10().range(),f=a.dispatch("legendClick","legendMouseover","legendMouseout");g.dispatch=f,g.margin=function(a){if(!arguments.length)return b;b=a;return g},g.width=function(a){if(!arguments.length)return c;c=a;return g},g.height=function(a){if(!arguments.length)return d;d=a;return g};return g},c.models.xaxis=function(){function g(h){h.each(function(g){e.domain(b).range(c);var h=a.select(this).selectAll("text.axislabel").data([d||null]);h.enter().append("text").attr("class","axislabel").attr("text-anchor","middle").attr("x",c[1]/2).attr("y",25),h.exit().remove(),h.text(function(a){return a}),a.transition(a.select(this)).call(f),a.select(this).selectAll("line.tick").filter(function(a){return!parseFloat(Math.round(a*1e5)/1e6)}).classed("zero",!0)});return g}var b=[0,1],c=[0,1],d=!1,e=a.scale.linear(),f=a.svg.axis().scale(e).orient("bottom");g.domain=function(a){if(!arguments.length)return b;b=a;return g},g.range=function(a){if(!arguments.length)return c;c=a;return g},g.axisLabel=function(a){if(!arguments.length)return d;d=a;return g},a.rebind(g,f,"scale","orient","ticks","tickSubdivide","tickSize","tickPadding","tickFormat");return g},c.models.yaxis=function(){function g(h){h.each(function(g){e.domain(b).range(c);var h=a.select(this).selectAll("text.axislabel").data([d||null]);h.enter().append("text").attr("class","axislabel").attr("transform","rotate(-90)").attr("text-anchor","middle").attr("y",-40),h.exit().remove(),h.attr("x",-c[0]/2).text(function(a){return a}),a.transition(a.select(this)).call(f),a.select(this).selectAll("line.tick").filter(function(a){return!parseFloat(Math.round(a*1e5)/1e6)}).classed("zero",!0)});return g}var b=[0,1],c=[0,1],d=!1,e=a.scale.linear(),f=a.svg.axis().scale(e).orient("left");g.domain=function(a){if(!arguments.length)return b;b=a;return g},g.range=function(a){if(!arguments.length)return c;c=a;return g},g.axisLabel=function(a){if(!arguments.length)return d;d=a;return g},a.rebind(g,f,"scale","orient","ticks","tickSubdivide","tickSize","tickPadding","tickFormat");return g},c.models.bar=function(){function j(k){k.each(function(j){f.domain(["One","Two","Three","Four","Five"]).rangeRoundBands([0,c-b.left-b.right],.1),g.domain([0,a.max(j,function(a){return a.y})]).range([d-b.top-b.bottom,0]),h.ticks(c/100),i.ticks(d/36).tickSize(-(c-b.right-b.left),0),i.tickSize(-(c-b.right-b.left),0);var k=a.select(this).selectAll("g.wrap").data([j]),l=k.enter().append("g").attr("class","wrap").append("g");l.append("g").attr("class","x axis"),l.append("g").attr("class","y axis"),l.append("g").attr("class","bars"),k.attr("width",c).attr("height",d);var m=k.select("g").attr("transform","translate("+b.left+","+b.top+")"),n=k.select(".bars").selectAll(".bar").data(function(a){return a});n.exit().remove();var o=n.enter().append("g").attr("class","bar").on("mouseover",function(b,c){a.select(this).classed("hover",!0)}).on("mouseout",function(b,c){a.select(this).classed("hover",!1)});o.append("rect").attr("y",function(a){return g(0)}),o.append("text").attr("text-anchor","middle").attr("dy","-4px"),n.attr("transform",function(a,b){return"translate("+f(a.label)+",0)"}),n.selectAll("rect").order().attr("width",f.rangeBand).transition().duration(e).attr("x",0).attr("y",function(a){return g(a.y)}).attr("height",function(a){return g.range()[0]-g(a.y)}),n.selectAll("text").attr("x",0).attr("y",function(a){return g(a.y)}).attr("dx",f.rangeBand()/2).text(function(a){return a.y}),m.select(".x.axis").attr("transform","translate(0,"+g.range()[0]+")").call(h),m.select(".y.axis").call(i)});return j}var b={top:20,right:10,bottom:20,left:60},c=960,d=500,e=500,f=a.scale.ordinal(),g=a.scale.linear(),h=a.svg.axis().scale(f).orient("bottom").ticks(5),i=a.svg.axis().scale(g).orient("left");j.margin=function(a){if(!arguments.length)return b;b=a;return j},j.width=function(a){if(!arguments.length)return c;b.left+b.right+20>a?c=b.left+b.right+20:c=a;return j},j.height=function(a){if(!arguments.length)return d;b.top+b.bottom+20>a?d=b.top+b.bottom+20:d=a;return j},j.animate=function(a){if(!arguments.length)return e;e=a;return j},j.xaxis={},a.rebind(j.xaxis,h,"tickFormat"),j.yaxis={},a.rebind(j.yaxis,i,"tickFormat");return j},c.models.line=function(){function r(s){s.each(function(r){var s=r.map(function(a){return a.values});p=p||m,q=q||n,m.domain(k||a.extent(a.merge(s),h)).range([0,c-b.left-b.right]),n.domain(l||a.extent(a.merge(s),i)).range([d-b.top-b.bottom,0]);var t=a.select(this).selectAll("g.d3line").data([r]),u=t.enter().append("g").attr("class","d3line"),v=u.append("g");v.append("g").attr("class","lines");var w=t.select("g").attr("transform","translate("+b.left+","+b.top+")");u.append("defs").append("clipPath").attr("id","chart-clip-path-"+g).append("rect"),t.select("#chart-clip-path-"+g+" rect").attr("width",c-b.left-b.right).attr("height",d-b.top-b.bottom),v.attr("clip-path","url(#chart-clip-path-"+g+")");var z=v.append("g").attr("class","shiftWrap");if(j){z.append("g").attr("class","point-clips"),z.append("g").attr("class","point-paths");var A=a.merge(r.map(function(a,b){return a.values.map(function(a,c){return[m(h(a)),n(i(a)),b,c]})})),B=t.select(".point-clips").selectAll(".clip-path").data(A);B.enter().append("clipPath").attr("class","clip-path").append("circle").attr("r",25),B.exit().remove(),B.attr("id",function(a,b){return"clip-"+g+"-"+a[2]+"-"+a[3]}).attr("transform",function(a){return"translate("+a[0]+","+a[1]+")"});var C=a.geom.voronoi(A).map(function(a,b){return{data:a,series:A[b][2],point:A[b][3]}}),D=t.select(".point-paths").selectAll("path").data(C);D.enter().append("path").attr("class",function(a,b){return"path-"+b}).style("fill-opacity",0),D.exit().remove(),D.attr("clip-path",function(a,b){return"url(#clip-"+g+"-"+a.series+"-"+a.point+")"}).attr("d",function(a){return"M"+a.data.join(",")+"Z"}).on("mouseover",function(a){var c=r[a.series],d=c.values[a.point];o.pointMouseover({point:d,series:c,pos:[m(h(d))+b.left,n(i(d))+b.top],seriesIndex:a.series,pointIndex:a.point})}).on("mouseout",function(a,b){o.pointMouseout({point:r[a.series].values[a.point],series:r[a.series],seriesIndex:a.series,pointIndex:a.point})}),o.on("pointMouseover.point",function(a){t.select(".series-"+a.seriesIndex+" .point-"+a.pointIndex).classed("hover",!0)}),o.on("pointMouseout.point",function(a){t.select(".series-"+a.seriesIndex+" circle.point-"+a.pointIndex).classed("hover",!1)})}var E=t.select(".lines").selectAll(".line").data(function(a){return a},function(a){return a.key});E.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),a.transition(E.exit()).style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),E.attr("class",function(a,b){return"line series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(a,b){return f[b%20]}).style("stroke",function(a,b){return f[b%20]}),a.transition(E).style("stroke-opacity",1).style("fill-opacity",.5);var F=E.selectAll("path").data(function(a,b){return[a.values]});F.enter().append("path").attr("d",a.svg.line().x(function(a){return p(h(a))}).y(function(a){return q(i(a))})),F.exit().remove(),a.transition(F).attr("d",a.svg.line().x(function(a){return m(h(a))}).y(function(a){return n(i(a))}));var G=E.selectAll("circle.point").data(function(a){return a.values});G.enter().append("circle").attr("cx",function(a){return p(h(a))}).attr("cy",function(a){return q(i(a))}),G.exit().remove(),G.attr("class",function(a,b){return"point point-"+b}),a.transition(G).attr("cx",function(a){return m(h(a))}).attr("cy",function(a){return n(i(a))}).attr("r",e),p=m.copy(),q=n.copy()});return r}var b={top:0,right:0,bottom:0,left:0},c=960,d=500,e=function(){return 2.5},f=a.scale.category10().range(),g=Math.floor(Math.random()*1e4),h=function(a){return a.x},i=function(a){return a.y},j=!0,k,l,m=a.scale.linear(),n=a.scale.linear(),o=a.dispatch("pointMouseover","pointMouseout"),p,q;r.dispatch=o,r.x=function(a){if(!arguments.length)return h;h=a;return r},r.y=function(a){if(!arguments.length)return i;i=a;return r},r.margin=function(a){if(!arguments.length)return b;b=a;return r},r.width=function(a){if(!arguments.length)return c;c=a;return r},r.height=function(a){if(!arguments.length)return d;d=a;return r},r.xDomain=function(a){if(!arguments.length)return k;k=a;return r},r.yDomain=function(a){if(!arguments.length)return l;l=a;return r},r.interactive=function(a){if(!arguments.length)return j;j=a;return r},r.dotRadius=function(b){if(!arguments.length)return e;e=a.functor(b);return r},r.color=function(a){if(!arguments.length)return f;f=a;return r},r.id=function(a){if(!arguments.length)return g;g=a;return r};return r},c.models.lineWithLegend=function(){function I(){m.domain(z.empty()?o.domain():z.extent()),x.xDomain(m.domain()),D.call(x),A.select(".x.axis").call(s)}function H(c){c.each(function(i){var k=i.filter(function(a){return!a.disabled}).map(function(a){return a.values});o.domain(a.extent(a.merge(k),q)).range([0,e-b.left-b.right]),p.domain(a.extent(a.merge(k),r)).range([h-d.top-d.bottom,0]),m.domain(z.empty()?o.domain():z.extent()).range([0,e-b.left-b.right]),n.domain(p.domain()).range([g-b.top-b.bottom,0]),x.width(e-b.left-b.right).height(g-b.top-b.bottom).color(i.map(function(a,b){return a.color||j[b%10]}).filter(function(a,b){return!i[b].disabled})),y.width(e-b.left-b.right).height(h-d.top-d.bottom).color(i.map(function(a,b){return a.color||j[b%10]}).filter(function(a,b){return!i[b].disabled})),A=a.select(this).selectAll("g.wrap").data([i]),B=A.enter().append("g").attr("class","wrap d3lineWithFocus").append("g"),B.append("g").attr("class","focus"),B.append("g").attr("class","context"),B.append("g").attr("class","legendWrap"),C=A.select("g"),w.width(e/2-b.right),C.select(".legendWrap").datum(i).attr("transform","translate("+(e/2-b.left)+",0)").call(w),b.top=w.height(),F=C.select(".focus").attr("transform","translate("+b.left+","+b.top+")"),B.select(".focus").append("g").attr("class","x axis"),B.select(".focus").append("g").attr("class","y axis"),B.select(".focus").append("g").attr("class","focusLines"),D=C.select(".focusLines").datum(i.filter(function(a){return!a.disabled})),a.transition(D).call(x),s.domain(m.domain()).range(m.range()).ticks(e/100).tickSize(-(g-b.top-b.bottom),0),C.select(".x.axis").attr("transform","translate(0,"+n.range()[0]+")"),a.transition(C.select(".x.axis")).call(s),t.domain(n.domain()).range(n.range()).ticks(f/36).tickSize(-(e-b.right-b.left),0),a.transition(C.select(".y.axis")).call(t),E=C.select(".context").attr("transform","translate("+d.left+","+g+")"),B.select(".context").append("g").attr("class","x2 axis"),B.select(".context").append("g").attr("class","y2 axis"),B.select(".context").append("g").attr("class","contextLines"),B.select(".context").append("g").attr("class","x brush").attr("class","x brush").call(z).selectAll("rect").attr("y",-5).attr("height",h+4),G=E.select(".contextLines").datum(i.filter(function(a){return!a.disabled})),a.transition(G).call(y),u.domain(o.domain()).range(o.range()).ticks(e/100).tickSize(-(h-d.top-d.bottom),0),E.select(".x2.axis").attr("transform","translate(0,"+p.range()[0]+")"),a.transition(E.select(".x2.axis")).call(u),v.domain(p.domain()).range(p.range()).ticks((h-d.top-d.bottom)/24).tickSize(-(e-d.right-d.left),0),E.select(".y2.axis"),a.transition(E.select(".y2.axis")).call(v),w.dispatch.on("legendClick",function(a,b){a.disabled=!a.disabled,i.filter(function(a){return!a.disabled}).length||i.map(function(a){a.disabled=!1,A.selectAll(".series").classed("disabled",!1);return a}),c.transition().call(H)}),w.dispatch.on("legendMouseover",function(a,b){a.hover=!0,c.transition().call(H)}),w.dispatch.on("legendMouseout",function(a,b){a.hover=!1,c.transition().call(H)}),x.dispatch.on("pointMouseover.tooltip",function(a){l.tooltipShow({point:a.point,series:a.series,pos:[a.pos[0]+b.left,a.pos[1]+b.top],seriesIndex:a.seriesIndex,pointIndex:a.pointIndex})}),x.dispatch.on("pointMouseout.tooltip",function(a){l.tooltipHide(a)})});return H}var b={top:30,right:20,bottom:30,left:60},d={top:0,right:20,bottom:20,left:60},e=960,f=500,g=400,h=100,i=function(){return 2.5},j=a.scale.category10().range(),k=Math.floor(Math.random()*1e4),l=a.dispatch("tooltipShow","tooltipHide"),m=a.scale.linear(),n=a.scale.linear(),o=a.scale.linear(),p=a.scale.linear(),q=function(a){return a.x},r=function(a){return a.y},s=c.models.xaxis().scale(m),t=c.models.yaxis().scale(n),u=c.models.xaxis().scale(o),v=c.models.yaxis().scale(p),w=c.models.legend().height(30),x=c.models.line(),y=c.models.line().dotRadius(.1).interactive(!1),z=a.svg.brush().x(o).on("brush",I),A,B,C,x,D,E,F,G;H.dispatch=l,H.x=function(a){if(!arguments.length)return q;q=a,x.x(a),y.x(a);return H},H.y=function(a){if(!arguments.length)return r;r=a,x.y(a),y.y(a);return H},H.margin=function(a){if(!arguments.length)return b;b=a;return H},H.width=function(a){if(!arguments.length)return e;e=a;return H},H.height=function(a){if(!arguments.length)return f;f=a,g=a-h;return H},H.contextHeight=function(a){if(!arguments.length)return h;h=a,g=f-a;return H},H.dotRadius=function(b){if(!arguments.length)return i;i=a.functor(b),x.dotRadius=b;return H},H.id=function(a){if(!arguments.length)return k;k=a;return H},H.xTickFormat=function(a){if(!arguments.length)return m.tickFormat();s.tickFormat(a),u.tickFormat(a);return H},H.yTickFormat=function(a){if(!arguments.length)return n.tickFormat();t.tickFormat(a),v.tickFormat(a);return H},H.xAxis=s,H.yAxis=t;return H},c.models.lineWithLegend=function(){function q(c){c.each(function(f){var r=f.filter(function(a){return!a.disabled}).map(function(a){return a.values});i.domain(a.extent(a.merge(r),k)).range([0,d-b.left-b.right]),j.domain(a.extent(a.merge(r),l)).range([e-b.top-b.bottom,0]),p.width(d-b.left-b.right).height(e-b.top-b.bottom).color(f.map(function(a,b){return a.color||g[b%10]}).filter(function(a,b){return!f[b].disabled}));var s=a.select(this).selectAll("g.wrap").data([f]),t=s.enter().append("g").attr("class","wrap d3lineWithLegend").append("g");t.append("g").attr("class","x axis"),t.append("g").attr("class","y axis"),t.append("g").attr("class","linesWrap"),t.append("g").attr("class","legendWrap"),o.dispatch.on("legendClick",function(a,b){a.disabled=!a.disabled,f.filter(function(a){return!a.disabled}).length||f.map(function(a){a.disabled=!1,s.selectAll(".series").classed("disabled",!1);return a}),c.transition().call(q)}),o.dispatch.on("legendMouseover",function(a,b){a.hover=!0,c.transition().call(q)}),o.dispatch.on("legendMouseout",function(a,b){a.hover=!1,c.transition().call(q)}),p.dispatch.on("pointMouseover.tooltip",function(a){h.tooltipShow({point:a.point,series:a.series,pos:[a.pos[0]+b.left,a.pos[1]+b.top],seriesIndex:a.seriesIndex,pointIndex:a.pointIndex})}),p.dispatch.on("pointMouseout.tooltip",function(a){h.tooltipHide(a)}),b.top=o.height();var u=s.select("g").attr("transform","translate("+b.left+","+o.height()+")");o.width(d/2-b.right),u.select(".legendWrap").datum(f).attr("transform","translate("+(d/2-b.left)+","+ -o.height()+")").call(o);var v=u.select(".linesWrap").datum(f.filter(function(a){return!a.disabled}));a.transition(v).call(p),m.domain(i.domain()).range(i.range()).ticks(d/100).tickSize(-(e-b.top-b.bottom),0),u.select(".x.axis").attr("transform","translate(0,"+j.range()[0]+")"),a.transition(u.select(".x.axis")).call(m),n.domain(j.domain()).range(j.range()).ticks(e/36).tickSize(-(d-b.right-b.left),0),a.transition(u.select(".y.axis")).call(n)});return q}var b={top:30,right:20,bottom:50,left:60},d=960,e=500,f=function(){return 2.5},g=a.scale.category10().range(),h=a.dispatch("tooltipShow","tooltipHide"),i=a.scale.linear(),j=a.scale.linear(),k=function(a){return a.x},l=function(a){return a.y},m=c.models.xaxis().scale(i),n=c.models.yaxis().scale(j),o=c.models.legend().height(30),p=c.models.line();q.dispatch=h,q.x=function(a){if(!arguments.length)return k;k=a,p.x(a);return q},q.y=function(a){if(!arguments.length)return l;l=a,p.y(a);return q},q.margin=function(a){if(!arguments.length)return b;b=a;return q},q.width=function(a){if(!arguments.length)return d;d=a;return q},q.height=function(a){if(!arguments.length)return e;e=a;return q},q.dotRadius=function(b){if(!arguments.length)return f;f=a.functor(b),p.dotRadius=b;return q},q.xAxis=m,q.yAxis=n;return q},c.models.scatter=function(){function s(t){t.each(function(s){var t=s.map(function(a){return a.values});o=o||g,p=p||h,q=q||i,s=s.map(function(a,b){a.values=a.values.map(function(a){a.series=b;return a});return a}),g.domain(a.extent(a.merge(t).map(j).concat(m))).range([0,c-b.left-b.right]),h.domain(a.extent(a.merge(t).map(k).concat(n))).range([d-b.top-b.bottom,0]),i.domain(a.extent(a.merge(t),l)).range([2,10]);var u=a.merge(s.map(function(a,b){return a.values.map(function(a,c){return[g(j(a)),h(k(a)),b,c]})})),v=a.select(this).selectAll("g.d3scatter").data([s]),w=v.enter().append("g").attr("class","d3scatter").append("g");w.append("g").attr("class","groups"),w.append("g").attr("class","point-clips"),w.append("g").attr("class","point-paths"),w.append("g").attr("class","distribution");var A=v.select("g").attr("transform","translate("+b.left+","+b.top+")"),B=w.append("g").attr("class","voronoi-clip").append("clipPath").attr("id","voronoi-clip-path-"+f).append("rect");v.select(".voronoi-clip rect").attr("x",-10).attr("y",-10).attr("width",c-b.left-b.right+20).attr("height",d-b.top-b.bottom+20),v.select(".point-paths").attr("clip-path","url(#voronoi-clip-path-"+f+")");var C=v.select(".point-clips").selectAll(".clip-path").data(u);C.enter().append("clipPath").attr("class","clip-path").append("circle").attr("r",25),C.exit().remove(),C.attr("id",function(a,b){return"clip-"+f+"-"+a[2]+"-"+a[3]}).attr("transform",function(a){return"translate("+a[0]+","+a[1]+")"});var D=a.geom.voronoi(u).map(function(a,b){return{data:a,series:u[b][2],point:u[b][3]}}),E=v.select(".point-paths").selectAll("path").data(D);E.enter().append("path").attr("class",function(a,b){return"path-"+b}),E.exit().remove(),E.attr("clip-path",function(a,b){return"url(#clip-"+f+"-"+a.series+"-"+a.point+")"}).attr("d",function(a){return"M"+a.data.join(",")+"Z"}).on("mouseover",function(a){r.pointMouseover({point:s[a.series].values[a.point],series:s[a.series],pos:[g(j(s[a.series].values[a.point]))+b.left,h(k(s[a.series].values[a.point]))+b.top],seriesIndex:a.series,pointIndex:a.point})}).on("mouseout",function(a,b){r.pointMouseout({point:s[a.series].values[a.point],series:s[a.series],seriesIndex:a.series,pointIndex:a.point})});var F=v.select(".groups").selectAll(".group").data(function(a){return a},function(a){return a.key});F.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),a.transition(F.exit()).style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),F.attr("class",function(a,b){return"group series-"+b}).classed("hover",function(a){return a.hover&&!a.disabled}),a.transition(F).style("fill",function(a,b){return e[b%10]}).style("stroke",function(a,b){return e[b%10]}).style("stroke-opacity",1).style("fill-opacity",.5);var G=F.selectAll("circle.point").data(function(a){return a.values});G.enter().append("circle").attr("cx",function(a){return o(j(a))}).attr("cy",function(a){return p(k(a))}).attr("r",function(a){return q(l(a))}),G.exit().remove(),G.attr("class",function(a,b){return"point point-"+b}),a.transition(G).attr("cx",function(a){return g(j(a))}).attr("cy",function(a){return h(k(a))}).attr("r",function(a){return i(l(a))});var H=F.selectAll("line.distX").data(function(a){return a.values});H.enter().append("line").attr("x1",function(a){return o(j(a))}).attr("x2",function(a){return o(j(a))}),H.attr("class",function(a,b){return"distX distX-"+b}).attr("y1",h.range()[0]).attr("y2",h.range()[0]+8),a.transition(H).attr("x1",function(a){return g(j(a))}).attr("x2",function(a){return g(j(a))}),H.exit().remove();var I=F.selectAll("line.distY").data(function(a){return a.values});I.enter().append("line").attr("y1",function(a){return p(k(a))}).attr("y2",function(a){return p(k(a))}),I.attr("class",function(a,b){return"distY distY-"+b}).attr("x1",g.range()[0]).attr("x2",g.range()[0]-8),a.transition(I).attr("y1",function(a){return h(k(a))}).attr("y2",function(a){return h(k(a))}),I.exit().remove(),r.on("pointMouseover.point",function(a){v.select(".series-"+a.seriesIndex+" .point-"+a.pointIndex).classed("hover",!0),v.select(".series-"+a.seriesIndex+" .distX-"+a.pointIndex).attr("y1",a.pos[1]-b.top),v.select(".series-"+a.seriesIndex+" .distY-"+a.pointIndex).attr("x1",a.pos[0]-b.left)}),r.on("pointMouseout.point",function(a){v.select(".series-"+a.seriesIndex+" circle.point-"+a.pointIndex).classed("hover",!1),v.select(".series-"+a.seriesIndex+" .distX-"+a.pointIndex).attr("y1",h.range()[0]),v.select(".series-"+a.seriesIndex+" .distY-"+a.pointIndex).attr("x1",g.range()[0])}),o=g.copy(),p=h.copy(),q=i.copy()});return s}var b={top:0,right:0,bottom:0,left:0},c=960,d=500,e=a.scale.category10().range(),f=Math.floor(Math.random()*1e5),g=a.scale.linear(),h=a.scale.linear(),i=a.scale.sqrt(),j=function(a){return a.x},k=function(a){return a.y},l=function(a){return a.size},m=[],n=[],o,p,q,r=a.dispatch("pointMouseover","pointMouseout");s.dispatch=r,s.margin=function(a){if(!arguments.length)return b;b=a;return s},s.width=function(a){if(!arguments.length)return c;c=a;return s},s.height=function(a){if(!arguments.length)return d;d=a;return s},s.x=function(b){if(!arguments.length)return j;j=a.functor(b);return s},s.y=function(b){if(!arguments.length)return k;k=a.functor(b);return s},s.size=function(b){if(!arguments.length)return l;l=a.functor(b);return s},s.forceX=function(a){if(!arguments.length)return m;m=a;return s},s.forceY=function(a){if(!arguments.length)return n;n=a;return s},s.color=function(a){if(!arguments.length)return e;e=a;return s},s.id=function(a){if(!arguments.length)return f;f=a;return s};return s},c.models.scatterWithLegend=function(){function x(c){c.each(function(g){var h=g.filter(function(a){return!a.disabled}).map(function(a){return a.values});r.domain(a.extent(a.merge(h).map(l).concat(o))).range([0,d-b.left-b.right]),s.domain(a.extent(a.merge(h).map(m).concat(p))).range([e-b.top-b.bottom,0]),w.width(d-b.left-b.right).height(e-b.top-b.bottom).color(g.map(function(a,b){return a.color||k[b%20]}).filter(function(a,b){return!g[b].disabled})),t.ticks(d/100).tickSize(-(e-b.top-b.bottom),0),u.ticks(e/36).tickSize(-(d-b.right-b.left),0);var i=a.select(this).selectAll("g.wrap").data([g]),j=i.enter().append("g").attr("class","wrap d3lineWithLegend").append("g");j.append("g").attr("class","legendWrap"),j.append("g").attr("class","x axis"),j.append("g").attr("class","y axis"),j.append("g").attr("class","scatterWrap"),v.dispatch.on("legendClick",function(a,b,d){a.disabled=!a.disabled,g.filter(function(a){return!a.disabled}).length||g.map(function(a){a.disabled=!1,i.selectAll(".series").classed("disabled",!1);return a}),c.transition(f).call(x)}),v.dispatch.on("legendMouseover",function(a,b){a.hover=!0,c.transition().call(x)}),v.dispatch.on("legendMouseout",function(a,b){a.hover=!1,c.transition().call(x)}),w.dispatch.on("pointMouseover.tooltip",function(a){q.tooltipShow({point:a.point,series:a.series,pos:[a.pos[0]+b.left,a.pos[1]+b.top],seriesIndex:a.seriesIndex,pointIndex:a.pointIndex})}),w.dispatch.on("pointMouseout.tooltip",function(a){q.tooltipHide(a)}),v.width(d/2-b.right),i.select(".legendWrap").datum(g).attr("transform","translate("+(d/2-b.left)+","+ -v.height()+")").call(v),b.top=v.height();var n=i.select("g").attr("transform","translate("+b.left+","+b.top+")"),z=i.select(".scatterWrap").datum(g.filter(function(a){return!a.disabled}));a.transition(z).call(w),t.domain(r.domain()).range(r.range()).ticks(d/100).tickSize(-(e-b.top-b.bottom),0),n.select(".x.axis").attr("transform","translate(0,"+s.range()[0]+")"),a.transition(n.select(".x.axis")).call(t),u.domain(s.domain()).range(s.range()).ticks(e/36).tickSize(-(d-b.right-b.left),0),a.transition(n.select(".y.axis")).call(u)});return x}var b={top:30,right:20,bottom:50,left:60},d=960,e=500,f=500,g=!0,h=!0,i=!1,j=!1,k=a.scale.category10().range(),l=function(a){return a.x},m=function(a){return a.y},n=function(a){return a.size},o=[],p=[],q=a.dispatch("tooltipShow","tooltipHide"),r=a.scale.linear(),s=a.scale.linear(),t=c.models.xaxis().scale(r).tickPadding(10),u=c.models.yaxis().scale(s).tickPadding(10),v=c.models.legend().height(30),w=c.models.scatter();x.dispatch=q,x.margin=function(a){if(!arguments.length)return b;b=a;return x},x.width=function(a){if(!arguments.length)return d;d=a;return x},x.height=function(a){if(!arguments.length)return e;e=a;return x},x.forceX=function(a){if(!arguments.length)return o;o=a,w.forceX(a);return x},x.forceY=function(a){if(!arguments.length)return p;p=a,w.forceY(a);return x},x.animate=function(a){if(!arguments.length)return f;f=a;return x},x.xAxis=t,x.yAxis=u;return x},c.models.sparkline=function(){function i(e){e.each(function(e){g.domain(a.extent(e,function(a){return a.x})).range([0,c-b.left-b.right]),h.domain(a.extent(e,function(a){return a.y})).range([d-b.top-b.bottom,0]);var i=a.select(this).selectAll("svg").data([e]),j=i.enter().append("svg").append("g");j.append("g").attr("class","sparkline").attr("transform","translate("+b.left+","+b.top+")").style("stroke",function(a,b){return a.color||f[b*2%20]}),i.attr("width",c).attr("height",d);var k=j.select(".sparkline").selectAll("path").data(function(a){return[a]});k.enter().append("path"),k.exit().remove(),k.attr("d",a.svg.line().x(function(a){return g(a.x)}).y(function(a){return h(a.y)}));var l=j.select(".sparkline").selectAll("circle.point").data(function(a){return a.filter(function(a){return h.domain().indexOf(a.y)!=-1})});l.enter().append("circle").attr("class","point"),l.exit().remove(),l.attr("cx",function(a){return g(a.x)}).attr("cy",function(a){return h(a.y)}).attr("r",2).style("stroke",function(a,b){return a.y==h.domain()[0]?"#d62728":"#2ca02c"}).style("fill",function(a,b){return a.y==h.domain()[0]?"#d62728":"#2ca02c"})});return i}var b={top:3,right:3,bottom:3,left:3},c=200,d=20,e=!0,f=a.scale.category20().range(),g=a.scale.linear(),h=a.scale.linear();i.margin=function(a){if(!arguments.length)return b;b=a;return i},i.width=function(a){if(!arguments.length)return c;c=a;return i},i.height=function(a){if(!arguments.length)return d;d=a;return i},i.animate=function(a){if(!arguments.length)return e;e=a;return i};return i}}(d3,window)