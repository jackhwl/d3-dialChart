<!doctype html>
<meta charset="utf-8">
<!-- <path fill="none"
d="M85.077943495344877,92.34168276987197A173,173 0 1,1 15.077943495344858,172.34168276987197L13.05593026359919,149.2299657741435A149.8,149.8 0 1,0 -13.055930263599206,149.2299657741435Z"
fill="#333">
</path> -->
<!-- <path d="M-122.895158570222,122.89515857022195A173.8,173.8 0 1,1 122.89515857022198,122.89515857022195L121.48094500784889,121.48094500784886A171.8,171.8 0 1,0 -121.4809450078489,121.48094500784886Z"
fill="#0f0"  id="arc001" transform="translate(300,300)">
</path> -->
<!-- <path d="M-122.32947314527274,122.32947314527271A173,173 0 1,1 122.32947314527273,122.32947314527271L84.7113923861484,84.71139238614839A119.80000000000001,119.80000000000001 0 1,0 -84.71139238614842,84.71139238614839Z"
fill="#0f0" id="arc101" transform="translate(300,300)">
</path> -->

<!-- <path fill="none" stroke-width="10" d="
    M86,388
    L203,330
    C320,272,554,156,673.8333333333334,165.83333333333334
    C793.6666666666666,175.66666666666666,799.3333333333334,311.3333333333333,683.5,316.6666666666667
    C567.6666666666666,322,330.3333333333333,197,211.66666666666666,134.5
    L93,72"></path> -->
  <svg width="1960" height="1500" style="background-color:#000">
    <!-- <path fill="#f00" stroke-width="10"  d="
        M86,388
        L203,330
        C320,272,554,156,673.8333333333334,165.83333333333334
        C793.6666666666666,175.66666666666666,799.3333333333334,311.3333333333333,683.5,316.6666666666667
        C567.6666666666666,322,330.3333333333333,197,211.66666666666666,134.5
        L93,72"></path> -->
<path fill="none" stroke-width="20"  d="M6.123233995736766e-15,-100L1.6003837651280364,-99.92298521581995C3.2007675302560665,-99.84597043163993,6.401535060512127,-99.69194086327987,9.587512205534997,-99.38459347979762C12.773489350557867,-99.07724609631538,15.944676110347547,-98.61658089771095,19.08641878907006,-98.00472656583533C22.228161467792567,-97.3928722339597,25.340460065447907,-96.62982876881287,28.40893300174794,-95.71912210806215C31.47740593804797,-94.80841544731143,34.50205321299269,-93.7500455909568,37.46889827315607,-92.54890314656245C40.43574333331945,-91.34776070216812,43.34478617870148,-90.00384566973406,46.182584450887724,-88.52336812883104C49.020382723073965,-87.04289058792803,51.78693642206441,-85.42585053855605,54.46946161569604,-83.67972014013988C57.15198680932768,-81.93358974172371,59.75048349760052,-80.05836899426335,62.25294432081615,-78.06272308102814C64.75540514403178,-76.06707716779292,67.16183010219021,-73.95100608878283,69.46109937736355,-71.72428796944547C71.7603686525369,-69.49756985010812,73.95248224472516,-67.16020469044348,76.02731064461632,-64.72299319085084C78.10213904450748,-62.28578169125821,80.05968225210154,-59.74872385173759,81.89089468133912,-57.123543130006745C83.7221071105767,-54.4983624082759,85.42698876145782,-51.78505880433484,86.99766156843877,-48.99617018767191C88.56833437541971,-46.207281571008984,90.00479833850046,-43.34280794162419,91.30041571995511,-40.4159857086189C92.59603310140977,-37.48916347561361,93.75080390123833,-34.499992638987834,94.75939205400518,-31.462285819553177C95.76798020677202,-28.424579000118516,96.63038571247719,-25.33833619787498,97.34262349268683,-22.217818592223068C98.05486127289643,-19.097300986571156,98.61693132761053,-15.942508577510875,99.02623639459159,-12.768019304433222C99.43554146157267,-9.593530031355572,99.69208154082074,-6.399343894260549,99.79467118960557,-3.2002208665069025C99.8972608383904,-0.0010978387532554201,99.84590005671201,3.202962079659016,99.64082617694137,6.397153289742924C99.43575229717075,9.591344499826832,99.07696531930787,12.775667001582377,98.56612315745276,15.935406400395618C98.05528099559766,19.095145799208858,97.3923836497503,22.23030209507979,96.58049429367213,25.326388084878594C95.76860493759398,28.4224740746774,94.80772357128501,31.47948975840408,93.70229031900817,34.48330901187159C92.59685706673133,37.48712826533911,91.34687192848662,40.43775108854746,89.95811094441305,43.32154298670109C88.56934996033948,46.20533488485471,87.04181313043705,49.02229585795361,85.38255902986268,51.759409047514566C83.7233049292883,54.49652223707553,81.93233355804198,57.15378764309856,80.01792079254147,59.71892634227842C78.10350802704096,62.28406504145828,76.06565386728627,64.75707703379496,73.9137750071756,67.12653481019663C71.76189614706493,69.49599258659829,69.49599258659829,71.76189614706493,67.12653481019663,73.9137750071756C64.75707703379496,76.06565386728627,62.28406504145826,78.10350802704099,59.71892634227841,80.01792079254149C57.15378764309855,81.93233355804199,54.49652223707553,83.72330492928829,51.75940904751457,85.38255902986266C49.022295857953615,87.04181313043703,46.20533488485472,88.56934996033948,43.3215429867011,89.95811094441305C40.437751088547465,91.34687192848662,37.48712826533911,92.59685706673133,34.4833090118716,93.70229031900817C31.479489758404082,94.80772357128501,28.422474074677403,95.76860493759398,25.326388084878594,96.58049429367213C22.23030209507979,97.3923836497503,19.09514579920885,98.05528099559766,15.935406400395614,98.56612315745276C12.775667001582379,99.07696531930787,9.591344499826848,99.43575229717075,6.397153289742946,99.64082617694139C3.202962079659045,99.84590005671201,-0.0010978387532265543,99.8972608383904,-3.2002208665068776,99.79467118960557C-6.399343894260529,99.69208154082074,-9.593530031355558,99.43554146157267,-12.768019304433214,99.02623639459159C-15.94250857751087,98.61693132761053,-19.09730098657115,98.05486127289643,-22.217818592223065,97.34262349268681C-25.338336197874977,96.63038571247719,-28.42457900011852,95.76798020677202,-31.462285819553173,94.75939205400518C-34.49999263898783,93.75080390123833,-37.48916347561359,92.5960331014098,-40.41598570861886,91.30041571995514C-43.34280794162415,90.00479833850049,-46.207281571008956,88.56833437541972,-48.996170187671886,86.99766156843879C-51.785058804334824,85.42698876145784,-54.49836240827588,83.72210711057672,-57.12354313000672,81.89089468133913C-59.748723851737566,80.05968225210154,-62.285781691258194,78.1021390445075,-64.72299319085083,76.02731064461634C-67.16020469044346,73.95248224472518,-69.49756985010812,71.7603686525369,-71.72428796944548,69.46109937736355C-73.95100608878283,67.1618301021902,-76.0670771677929,64.75540514403178,-78.06272308102812,62.252944320816155C-80.05836899426333,59.75048349760054,-81.93358974172368,57.151986809327724,-83.67972014013985,54.46946161569608C-85.42585053855602,51.78693642206444,-87.04289058792801,49.020382723073986,-88.52336812883104,46.182584450887745C-90.00384566973406,43.3447861787015,-91.3477607021681,40.43574333331947,-92.54890314656245,37.46889827315609C-93.75004559095679,34.502053212992706,-94.80841544731143,31.477405938047966,-95.71912210806215,28.408933001747933C-96.62982876881287,25.3404600654479,-97.3928722339597,22.228161467792575,-98.00472656583533,19.086418789070077C-98.61658089771095,15.94467611034758,-99.07724609631538,12.77348935055791,-99.38459347979762,9.587512205535035C-99.69194086327987,6.401535060512162,-99.84597043163993,3.200767530256087,-99.92298521581995,1.6003837651280497L-100,1.2246467991473532e-14" >
</path>
  </svg>
  <script src="d3.min.js"></script>
  <script type="text/javascript" src="dial.chart.js"></script>
  <!-- <script src="//d3js.org/d3.v4.min.js"></script> -->
  <script src="https://d3js.org/d3-color.v1.min.js"></script>
<script src="https://d3js.org/d3-interpolate.v1.min.js"></script>
<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
  <script>

  //var color = d3.interpolate("red", "white", "green"); //#37A6FE
  //var color = d3.interpolateRainbow;
  var color = d3.interpolate("#000", "#37A6FE");
  // var color = d3.scaleLinear()
  //   .domain([-100, 0, +100])
  //   .range(["red", "white", "green"]);
  console.log(color);
  //
  // var r=230, scale=[ 0.71, 0.875, 0.76 ], range=[-135, 135],m = [ 100, 100, 200, 200 ];
  // var w = 256,
  //     h = 256,
  //     wm = w - m[1] - m[3],
  //     hm = h - m[0] - m[2];

  // var arc = d3.svg.arc()
  //     .innerRadius(r* scale[2]-3)
  //     .outerRadius(r* scale[2]-1)
  //     .startAngle(range[0] * (Math.PI/180)) //converting from degs to radians
  //     .endAngle(range[1] * (Math.PI/180)); //just radians

  // d3.select("svg").append("path")
  //     .attr("d", arc)
  //     //.attr("stroke-width", "20")
  //     .attr("fill", "#0f0")
  //     .attr("id", "arc101")
  //     .attr('transform', 'translate(300,300)');
  //     ;

  //d3.select('svg')
        //.attr('transform', 'translate(' + (m[3] + wm / 2) + ',' + (m[0] + hm / 2) + ')');


  var path = d3.select("path").remove();

  d3.select("svg").selectAll("path")
      .data(quads(samples(path.node(), 8)))
    .enter().append("path")
      .style("fill", function(d) { return color(d.t); })
      .style("stroke", function(d) { return color(d.t); })
      .attr("d", function(d) { return lineJoin(d[0], d[1], d[2], d[3], 82); })
      .attr('transform', 'translate(300,300)')
      ;

  // Sample the SVG path uniformly with the specified precision.
  function samples(path, precision) {
    var n = path.getTotalLength(), t = [0], i = 0, dt = precision;
    while ((i += dt) < n) t.push(i);
    t.push(n);
    return t.map(function(t) {
      var p = path.getPointAtLength(t), a = [p.x, p.y];
      a.t = t / n;
      return a;
    });
  }

  // Compute quads of adjacent points [p0, p1, p2, p3].
  function quads(points) {
    return d3.range(points.length - 1).map(function(i) {
      var a = [points[i - 1], points[i], points[i + 1], points[i + 2]];
      a.t = (points[i].t + points[i + 1].t) / 2;
      return a;
    });
  }

  // Compute stroke outline for segment p12.
  function lineJoin(p0, p1, p2, p3, width) {
    var u12 = perp(p1, p2),
        r = width / 2,
        a = [p1[0] + u12[0] * r, p1[1] + u12[1] * r],
        b = [p2[0] + u12[0] * r, p2[1] + u12[1] * r],
        c = [p2[0] - u12[0] * r, p2[1] - u12[1] * r],
        d = [p1[0] - u12[0] * r, p1[1] - u12[1] * r];

    if (p0) { // clip ad and dc using average of u01 and u12
      var u01 = perp(p0, p1), e = [p1[0] + u01[0] + u12[0], p1[1] + u01[1] + u12[1]];
      a = lineIntersect(p1, e, a, b);
      d = lineIntersect(p1, e, d, c);
    }

    if (p3) { // clip ab and dc using average of u12 and u23
      var u23 = perp(p2, p3), e = [p2[0] + u23[0] + u12[0], p2[1] + u23[1] + u12[1]];
      b = lineIntersect(p2, e, a, b);
      c = lineIntersect(p2, e, d, c);
    }

    return "M" + a + "L" + b + " " + c + " " + d + "Z";
  }

  // Compute intersection of two infinite lines ab and cd.
  function lineIntersect(a, b, c, d) {
    var x1 = c[0], x3 = a[0], x21 = d[0] - x1, x43 = b[0] - x3,
        y1 = c[1], y3 = a[1], y21 = d[1] - y1, y43 = b[1] - y3,
        ua = (x43 * (y1 - y3) - y43 * (x1 - x3)) / (y43 * x21 - x43 * y21);
    return [x1 + ua * x21, y1 + ua * y21];
  }

  // Compute unit vector perpendicular to p01.
  function perp(p0, p1) {
    var u01x = p0[1] - p1[1], u01y = p1[0] - p0[0],
        u01d = Math.sqrt(u01x * u01x + u01y * u01y);
    return [u01x / u01d, u01y / u01d];
  }

  </script>
